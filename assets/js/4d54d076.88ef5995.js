"use strict";(self.webpackChunkgboost_docs=self.webpackChunkgboost_docs||[]).push([[7080],{4852:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return g}});var r=n(9231);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),g=o,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||i;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,a[1]=l;for(var p=2;p<i;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7094:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return u}});var r=n(2208),o=n(9161),i=(n(9231),n(4852)),a=["components"],l={},s="Contributing",p={unversionedId:"contributing",id:"contributing",title:"Contributing",description:"First clone the repository//github.com/awslabs/green-boost.git and install dependencies: pnpm i.",source:"@site/docs/contributing.md",sourceDirName:".",slug:"/contributing",permalink:"/green-boost/docs/contributing",draft:!1,editUrl:"https://github.com/awslabs/green-boost/docs/contributing.md",tags:[],version:"current",frontMatter:{}},c={},u=[{value:"Developing Libraries",id:"developing-libraries",level:2},{value:"gboost-ui",id:"gboost-ui",level:3},{value:"gboost",id:"gboost",level:3},{value:"Commit Workflow",id:"commit-workflow",level:2}],d={toc:u};function g(e){var t=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"contributing"},"Contributing"),(0,i.kt)("p",null,"First clone the repository: ",(0,i.kt)("inlineCode",{parentName:"p"},"git clone https://github.com/awslabs/green-boost.git")," and install dependencies: ",(0,i.kt)("inlineCode",{parentName:"p"},"pnpm i"),"."),(0,i.kt)("h2",{id:"developing-libraries"},"Developing Libraries"),(0,i.kt)("p",null,"To develop ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost-ui")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost-infra")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost-common")," in your Green Boost application repository (created with ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost create"),"), run ",(0,i.kt)("inlineCode",{parentName:"p"},"pnpm add ../path/to/gboost/packages/gboost-*")," replacing the path with the path to wherever the package is locally. This will change your package.json."),(0,i.kt)("p",null,"Instructions below allow you to edit .ts files and test out your changes without having to compile to .js each time you make a change."),(0,i.kt)("h3",{id:"gboost-ui"},"gboost-ui"),(0,i.kt)("p",null,"After running ",(0,i.kt)("inlineCode",{parentName:"p"},"pnpm add ../path/to/gboost/packages/gboost-ui")," in your GB app, you'll need to restart the Vite dev server."),(0,i.kt)("p",null,"Vite will pre-bundle any non JS file (i.e. JSX) so you'll need to add this plugin in your vite.config.ts"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'import type { Plugin } from "vite";\n\nfunction reactJsOrJsx({\n  importerRegExpTest,\n}: {\n  importerRegExpTest: RegExp;\n}): Plugin {\n  return {\n    name: "react-js-or-jsx",\n    async resolveId(id: string, importer: string) {\n      if (importerRegExpTest.test(importer)) {\n        let resolved = await this.resolve(id, importer, {\n          skipSelf: true,\n        });\n        if (!resolved) {\n          resolved = await this.resolve(id + "x", importer, {\n            skipSelf: true,\n          });\n        }\n        return resolved;\n      }\n    },\n  };\n}\n\nexport default defineConfig(({ mode }) => {\n  // ...\n  return {\n    plugins: [\n      // ...\n      reactJsOrJsx({ importerRegExpTest: /green-boost/ }),\n    ],\n    //...\n  };\n});\n')),(0,i.kt)("p",null,"For any library used in ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost-ui")," and the consuming package (ui folder), you'll want to add that library to Vite's ",(0,i.kt)("a",{parentName:"p",href:"https://vitejs.dev/config/#resolve-dedupe"},"resolve.dedupe")," configuration parameter. See an explanation ",(0,i.kt)("a",{parentName:"p",href:"https://blog.maximeheckel.com/posts/duplicate-dependencies-npm-link/"},"here"),". Here is an inexhaustive list: ",(0,i.kt)("inlineCode",{parentName:"p"},'["aws-amplify", "@aws-amplify/ui-react", "graphql", "graphql-tag", "react", "react-dom", "react-icons", "react-router-dom"]')),(0,i.kt)("h3",{id:"gboost"},"gboost"),(0,i.kt)("p",null,"To develop ",(0,i.kt)("inlineCode",{parentName:"p"},"gboost")," locally, run ",(0,i.kt)("inlineCode",{parentName:"p"},"pnpm dlx ts-node --esm ../path/to/green-boost/packages/gboost/src/index.ts")," or you can globally install ts-node with ",(0,i.kt)("inlineCode",{parentName:"p"},"pnpm add -g ts-node")," and then run ",(0,i.kt)("inlineCode",{parentName:"p"},"ts-node --esm ../path/to/green-boost/packages/gboost/src/index.ts")),(0,i.kt)("h2",{id:"commit-workflow"},"Commit Workflow"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create a feature branch. Please use a descriptive name like ",(0,i.kt)("inlineCode",{parentName:"li"},"feat-description")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"fix-description")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"refactor-description")," etc."),(0,i.kt)("li",{parentName:"ol"},"Add feature, fix bug, refactor, etc."),(0,i.kt)("li",{parentName:"ol"},"Create changeset with: ",(0,i.kt)("inlineCode",{parentName:"li"},"pnpm changeset")," in root of repo. Answer prompts, typically you'll be creating a minor change"),(0,i.kt)("li",{parentName:"ol"},"Stage changes ",(0,i.kt)("em",{parentName:"li"},"including")," changeset file (i.e. ",(0,i.kt)("inlineCode",{parentName:"li"},"git add -A"),")"),(0,i.kt)("li",{parentName:"ol"},"Commit changes. Husky git commits should trigger lint-staged to run validating your staged files"),(0,i.kt)("li",{parentName:"ol"},"Push branch and create a PR into main ensuring status checks run successfully")))}g.isMDXComponent=!0}}]);